furniture {
	canBlock = true
	shadow = rectangle
	onHit: [
		{do:generate, count = [2, 4], prototype = particle_wood, x = [-8, 8], z = [8, 16], impulseX = [-50, 50], impulseY = [-20, 0], impulseZ = [50, 100]}
		{do:sound, file = "audio/sound/break_wood.ogg", pitchVariance = 0.05}
	]
	onExpire: [
		{do:generate, count = [4, 8], prototype = particle_wood, x = [-8, 8], z = [8, 16], impulseX = [-50, 50], impulseY = [-20, 0], impulseZ = [50, 100]}
		{do:deathClone, timeToLive = 0.5}
		{do:sound, file = "audio/sound/break_wood.ogg", pitchVariance = 0.05}
	]
}

stone_furniture {
	canBlock = true
	canBeHurt = false
	shadow = rectangle
//	onHit: [
//		{do:generate, count = 1, prototype = particle_stone, x = [-8, 8], z = [8, 16], impulseX = [-20, 20], impulseY = [-20, 0], impulseZ = [10, 40]}
//	]
//	onExpire: [
//		{do:generate, count = [4, 8], prototype = particle_stone, x = [-8, 8], z = [8, 16], impulseX = [-50, 50], impulseY = [-20, 0], impulseZ = [50, 100]}
//		{do:deathClone, timeToLive = 0.5}
//	]
}

wall_decoration {
	canBlock = false
	shadow = none
	drawOffset = [24, 4]
}

animation {

	prop_bookshelf {
		texture = furniture
		loop = [0]
	}
	prop_table_1 {
		texture = furniture
		loop = [1]
	}
	prop_table_2 {
		texture = furniture
		loop = [2]
	}
	prop_sideboard {
		texture = furniture
		loop = [3]
	}
	prop_torture_table {
		texture = furniture
		loop = [4]
	}
	prop_guillotine {
		texture = furniture
		loop = [5]
	}
	prop_iron_maiden {
		texture = furniture
		loop = [6]
	}
	prop_cage {
		texture = furniture
		loop = [7]
	}
	prop_painting_1 {
		texture = furniture
		loop = [8]
	}
	prop_painting_2 {
		texture = furniture
		loop = [9]
	}
	prop_painting_3 {
		texture = furniture
		loop = [10]
	}
	prop_crate_1 {
		texture = furniture
		loop = [11]
	}
	prop_crate_2 {
		texture = furniture
		loop = [12]
	}
	prop_crate_3 {
		texture = furniture
		loop = [13]
	}
	prop_crate_4 {
		texture = furniture
		loop = [14]
	}
	prop_barrel_1 {
		texture = furniture
		loop = [15]
	}
	prop_barrel_2 {
		texture = furniture
		loop = [16]
	}
	prop_barrel_3 {
		texture = furniture
		loop = [17]
	}
	prop_ring_1 {
		texture = furniture
		loop = [18]
	}
	prop_ring_2 {
		texture = furniture
		loop = [19]
	}
	prop_stand_1 {
		texture = furniture
		loop = [20]
	}
	prop_stand_2 {
		texture = furniture
		loop = [21]
	}
	prop_armor_stand_1 {
		texture = furniture
		loop = [22]
	}
	prop_armor_stand_2 {
		texture = furniture
		loop = [23]
	}
	prop_cauldron_1 {
		texture = furniture
		loop = [24]
	}
	prop_cauldron_2 {
		texture = furniture
		loop = [25]
	}
	prop_brazier_1 {
		texture = furniture
		loop = [26]
	}
	prop_chandelier_1 {
		texture = furniture
		loop = [27]
	}
	prop_banner_1 {
		texture = furniture
		loop = [28]
	}
	prop_banner_2 {
		texture = furniture
		loop = [29]
	}
	prop_banner_3 {
		texture = furniture
		loop = [30]
	}
	prop_banner_4 {
		texture = furniture
		loop = [31]
	}
	prop_banner_5 {
		texture = furniture
		loop = [32]
	}
	prop_banner_6 {
		texture = furniture
		loop = [33]
	}
	prop_banner_7 {
		texture = furniture
		loop = [34]
	}
	prop_banner_8 {
		texture = furniture
		loop = [35]
	}
	prop_banner_9 {
		texture = furniture
		loop = [36]
	}
	prop_grave_1 {
		texture = furniture
		loop = [37]
	}
	prop_grave_2 {
		texture = furniture
		loop = [38]
	}
	prop_grave_3 {
		texture = furniture
		loop = [39]
	}
	prop_grave_4 {
		texture = furniture
		loop = [40]
	}
	prop_grave_5 {
		texture = furniture
		loop = [41]
	}
	prop_grave_6 {
		texture = furniture
		loop = [42]
	}
	prop_grave_7 {
		texture = furniture
		loop = [43]
	}
	prop_grave_8 {
		texture = furniture
		loop = [44]
	}
	prop_grave_9 {
		texture = furniture
		loop = [45]
	}
	prop_grave_10 {
		texture = furniture
		loop = [46]
	}
	prop_grave_11 {
		texture = furniture
		loop = [47]
	}
	prop_pillar_1 {
		texture = furniture
		loop = [48]
	}
	prop_pillar_2 {
		texture = furniture
		loop = [49]
	}
	prop_pillar_3 {
		texture = furniture
		loop = [50]
	}
	prop_pillar_4 {
		texture = furniture
		loop = [51]
	}
	prop_pillar_5 {
		texture = furniture
		loop = [52]
	}
	prop_skeleton_1 {
		texture = furniture
		loop = [53]
	}
	prop_skeleton_2 {
		texture = furniture
		loop = [54]
	}
	prop_cell_1 {
		texture = furniture
		loop = [55]
	}
	prop_cell_2 {
		texture = furniture
		loop = [56]
	}
	prop_magic_wares_1 {
		texture = furniture
		loop = [57]
	}
	prop_magic_wares_2 {
		texture = furniture
		loop = [58]
	}
	prop_round_carpet {
		texture = furniture
		loop = [59]
	}
	prop_dungeon_archway {
		texture = dungeon_archway
	}
	prop_dungeon_column {
		texture = dungeon_column
	}
	prop_dungeon_column_broken {
		texture = dungeon_column_broken
	}
	prop_dungeon_statue_angel {
		texture = dungeon_statue_angel
	}
	prop_dungeon_statue_demon {
		texture = dungeon_statue_demon
	}
	prop_dungeon_statue_hooded {
		texture = dungeon_statue_hooded
	}
}

barrelGeometry = [-3, 0, -5, 1, -5, 1, -7, 3, -7, 3, -7, 5, -7, 5, -5, 7, -5, 7, 0, 8, 0, 8, 6, 7, 6, 7, 8, 5, 8, 5, 8, 3, 8, 3, 6, 1, 6, 1, 2, 0, 2, 0, -3, 0]

prototype {
	# Bookcase
	prop_bookshelf = ${furniture} {
		animation = prop_bookshelf
		boundingBox = [48, 10]
		boundingBoxOffset = [24, 0]
		drawOffset = [24, 5]
		health = 500
	}
	# Tables
	prop_table_1 = ${furniture} {
		animation = prop_table_1
		boundingBox = [42, 20]
		boundingBoxOffset = [21, 0]
		drawOffset = [24, 12]
		occlusionSegments = [-8, 0, -8, 5, -8, 5, 7, 5, 7, 5, 7, 0, 7, 0, -8, 0]
		health = 500
	}
	prop_table_2 = ${prototype.prop_table_1} {
		animation = prop_table_2
	}
	prop_sideboard = ${furniture} {
		animation = prop_sideboard
		boundingBox = [18, 10]
		boundingBoxOffset = [9, 0]
		drawOffset = [24, 5]
	}
	prop_torture_table = ${furniture} {
		animation = prop_torture_table
		boundingBox = [42, 24]
		boundingBoxOffset = [24, 0]
		drawOffset = [27, 5]
		occlusionSegments = [
			-19, 0, -22, 0, -22, 0, -22, 2, -22, 2, -19, 2, -19, 2, -19, 0,
			14, 0, 14, 2, 14, 2, 17, 2, 17, 2, 17, 0, 17, 0, 14, 0,
			-19, 14, -22, 14, -22, 14, -22, 16, -22, 16, -19, 16, -19, 16, -19, 14,
			14, 14, 14, 16, 14, 16, 17, 16, 17, 16, 17, 14, 17, 14, 14, 14]
	}
	prop_guillotine = ${furniture} {
		animation = prop_guillotine
		boundingBox = [30, 10]
		boundingBoxOffset = [15, 0]
		drawOffset = [24, 2]
		occlusionSegments = [
			-10, 0, -10, 4, -10, 4, -15, 4, -15, 4, -15, 6, -15, 6, 13, 6, 13, 6, 13, 4, 13, 4, 11, 4, 11, 4, 11, 0, 11, 0, -10, 0]
	}
	prop_iron_maiden = ${furniture} {
		animation = prop_iron_maiden
		boundingBox = [20, 10]
		boundingBoxOffset = [7, 0]
		drawOffset = [24, 2]
		occlusionSegments = ${barrelGeometry}
	}
	# Cage
	prop_cage = ${stone_furniture} {
		animation = prop_cage
		boundingBox = [22, 10]
		boundingBoxOffset = [11, 0]
		drawOffset = [24, 6]
		occlusionSegments = ${barrelGeometry}
		health = 1000
	}
	# Paintings
	prop_painting_1 = ${wall_decoration} {
		animation = prop_painting_1
		boundingBox = [24, 28]
	}
	prop_painting_2 = ${wall_decoration} {
		animation = prop_painting_2
		boundingBox = [24, 28]
	}
	prop_painting_3 = ${wall_decoration} {
		animation = prop_painting_3
		boundingBox = [24, 28]
	}

	prop_crate_1 = ${furniture} {
		animation = prop_crate_1
		boundingBox = [24, 10]
		boundingBoxOffset = [12, 0]
		drawOffset = [24, 9]
		health = 10
		onExpire = ${furniture.onExpire} [
			{do:generateLoot, loot = crate}
		]
	}
	prop_crate_2 = ${furniture} {
		animation = prop_crate_2
		boundingBox = [24, 10]
		boundingBoxOffset = [12, 0]
		drawOffset = [24, 9]
		health = 10
		onExpire = ${furniture.onExpire} [
			{do:generateLoot, loot = crate}
		]
	}
	prop_crate_3 = ${furniture} {
		animation = prop_crate_3
		boundingBox = [26, 12]
		boundingBoxOffset = [12, 0]
		drawOffset = [23, 9]
		health = 10
		onExpire = ${furniture.onExpire} [
			{do:generateLoot, loot = crate}
		]
	}
	prop_crate_4 = ${furniture} {
		animation = prop_crate_4
		boundingBox = [26, 12]
		boundingBoxOffset = [12, 0]
		drawOffset = [23, 9]
		health = 10
		onExpire = ${furniture.onExpire} [
			{do:generateLoot, loot = crate}
		]
	}
	prop_barrel_1 = ${furniture} {
		animation = prop_barrel_1
		boundingBox = [18, 16]
		boundingBoxOffset = [9, 0]
		drawOffset = [24, 10]
		occlusionSegments = ${barrelGeometry}
		health = 10
		onExpire = ${furniture.onExpire} [
			{do:generateLoot, loot = crate}
		]
	}
	prop_barrel_2 = ${furniture} {
		animation = prop_barrel_2
		boundingBox = [18, 16]
		boundingBoxOffset = [9, 0]
		drawOffset = [24, 10]
		occlusionSegments = ${barrelGeometry}
		health = 10
		onExpire = ${furniture.onExpire} [
			{do:generateLoot, loot = crate}
		]
	}
	prop_barrel_3 = ${furniture} {
		animation = prop_barrel_3
		boundingBox = [18, 16]
		boundingBoxOffset = [9, 0]
		drawOffset = [24, 10]
		occlusionSegments = ${barrelGeometry}
		health = 10
		onExpire = ${furniture.onExpire} [
			{do:generateLoot, loot = crate}
		]
	}
	prop_ring_1 = ${wall_decoration} {
		animation = prop_ring_1
		boundingBox = [24, 24]
	}
	prop_ring_2 = ${wall_decoration} {
		animation = prop_ring_2
		boundingBox = [24, 24]
	}
	prop_stand_1 = ${furniture} {
		animation = prop_stand_1
		boundingBox = [14, 6]
		boundingBoxOffset = [7, 0]
		drawOffset = [24, 4]
		occlusionSegments = [0, 0, -8, 2, -8, 2, 0, 5, 0, 5, 8, 2, 8, 2, 0, 0]
	}
	prop_stand_2 = ${prototype.prop_stand_1} {
		animation = prop_stand_2
	}
	prop_armor_stand_1 = ${prototype.prop_stand_1} {
		animation = prop_armor_stand_1
	}
	prop_armor_stand_2 = ${prototype.prop_stand_1} {
		animation = prop_armor_stand_2
	}
	prop_cauldron_1 = ${furniture} {
		animation = prop_cauldron_1
		boundingBox = [20, 10]
		boundingBoxOffset = [10, 0]
		drawOffset = [24, 5]
		occlusionSegments = ${barrelGeometry}
	}
	prop_cauldron_2 = ${prototype.prop_cauldron_1} {
		animation = prop_cauldron_2
		light = {diameter:120, color:${red}, texture:light, traits:[torchlight]}
	}
	prop_cauldron_3 = ${furniture} {
		animation = prop_cauldron_2
		drawOffset = [24, 19]
		light = {diameter:120, color:004400, texture:light, traits:[torchlight]}
		flare = {diameter:60, color:004400, texture:light_flare, traits:[torchlight]}
		z = 14
		with = [
			{do:generate, prototype = smoke_small_mild, frequency = 0.1, impulseX = [-2, 2], impulseY = [-2, 2], impulseZ = [30, 50], z = 18}
		]
	}
	prop_brazier_1 = ${furniture} {
		animation = prop_brazier_1
		boundingBox = [12, 12]
		drawOffset = [24, 26]
		light = {diameter:120, color:${red}, texture:light, traits:[torchlight, rotateSlow]}
		flare = {diameter:60, color:${red}, texture:light_flare, traits:[torchlight]}
		shadow = none
		z = 14
		with = [
			{do:generate, prototype = smoke_small_mild, frequency = 0.1, impulseX = [-2, 2], impulseY = [-2, 2], impulseZ = [30, 50], z = 18}
		]
	}
	prop_chandelier_1 = ${furniture} {
		animation = prop_chandelier_1
		boundingBox = [24, 24]
		boundingBoxOffset = [12, 0]
		drawOffset = [24, 24]
		canBlock = false
		shadow = none
		z = 48
		light = {diameter:240, color:${gold}, texture:light, traits:[torchlight]}
	}
	prop_magic_wares_1 = ${furniture} {
		animation = prop_magic_wares_1
		boundingBox = [44, 16]
		boundingBoxOffset = [22, 0]
		drawOffset = [24, 2]
		occlusionSegments = [-13, 7, 0, 12, 0, 12, 19, 8, 19, 8, 12, 1, 12, 1, -13, 7]
	}
	prop_magic_wares_2 = ${prototype.prop_magic_wares_1} {
		animation = prop_magic_wares_2
		occlusionSegments = [-19, 8, -12, 1, -12, 1, 13, 7, 13, 7, 0, 12, 0, 12, -19, 8]
	}
	prop_banner_1 = ${wall_decoration} {
		animation = prop_banner_1
		boundingBox = [26, 42]
	}
	prop_banner_2 = ${wall_decoration} {
		animation = prop_banner_2
		boundingBox = [26, 42]
	}
	prop_banner_3 = ${wall_decoration} {
		animation = prop_banner_3
		boundingBox = [26, 42]
	}
	prop_banner_4 = ${wall_decoration} {
		animation = prop_banner_4
		boundingBox = [26, 42]
	}
	prop_banner_5 = ${wall_decoration} {
		animation = prop_banner_5
		boundingBox = [26, 42]
	}
	prop_banner_6 = ${wall_decoration} {
		animation = prop_banner_6
		boundingBox = [26, 42]
	}
	prop_banner_7 = ${wall_decoration} {
		animation = prop_banner_7
		boundingBox = [26, 42]
	}
	prop_banner_8 = ${wall_decoration} {
		animation = prop_banner_8
		boundingBox = [26, 42]
	}
	prop_banner_9 = ${wall_decoration} {
		animation = prop_banner_9
		boundingBox = [26, 42]
	}
	prop_grave_1 = ${stone_furniture} {
		animation = prop_grave_1
		boundingBox = [14, 6]
		boundingBoxOffset = [7, 0]
		drawOffset = [24, 11]
		occlusionSegments = [-3, 0, -3, 2, -3, 2, 2, 2, 2, 2, 2, 0, 2, 0, -3, 0]
	}
	prop_grave_2 = ${stone_furniture} {
		animation = prop_grave_2
		boundingBox = [18, 6]
		boundingBoxOffset = [9, 0]
		drawOffset = [24, 11]
		occlusionSegments = [-7, 0, -7, 3, -7, 3, 6, 3, 6, 3, 6, 0, 6, 0, -7, 0]
	}
	prop_grave_3 = ${stone_furniture} {
		animation = prop_grave_3
		boundingBox = [20, 6]
		boundingBoxOffset = [10, 0]
		drawOffset = [24, 11]
	}
	prop_grave_4 = ${stone_furniture} {
		animation = prop_grave_4
		boundingBox = [20, 6]
		boundingBoxOffset = [10, 0]
		drawOffset = [24, 11]
	}
	prop_grave_5 = ${stone_furniture} {
		animation = prop_grave_5
		boundingBox = [20, 6]
		boundingBoxOffset = [10, 0]
		drawOffset = [24, 11]
	}
	prop_grave_6 = ${stone_furniture} {
		animation = prop_grave_6
		boundingBox = [20, 6]
		boundingBoxOffset = [10, 0]
		drawOffset = [24, 11]
	}
	prop_grave_7 = ${stone_furniture} {
		animation = prop_grave_7
		boundingBox = [20, 6]
		boundingBoxOffset = [10, 0]
		drawOffset = [24, 11]
	}
	prop_grave_8 = ${stone_furniture} {
		animation = prop_grave_8
		boundingBox = [14, 6]
		boundingBoxOffset = [7, 0]
		drawOffset = [24, 11]
	}
	prop_grave_9 = ${stone_furniture} {
		animation = prop_grave_9
		boundingBox = [15, 6]
		boundingBoxOffset = [7, 0]
		drawOffset = [24, 11]
	}
	prop_grave_10 = ${stone_furniture} {
		animation = prop_grave_10
		boundingBox = [12, 6]
		boundingBoxOffset = [6, 0]
		drawOffset = [24, 11]
	}
	prop_grave_11 = ${stone_furniture} {
		animation = prop_grave_11
		boundingBox = [12, 6]
		boundingBoxOffset = [6, 0]
		drawOffset = [24, 11]
	}
	prop_pillar_1 = ${stone_furniture} {
		animation = prop_pillar_1
		boundingBox = [14, 8]
		boundingBoxOffset = [7, 0]
		drawOffset = [24, 11]
		occlusionSegments = [0, 0, -8, 2, -8, 2, 0, 5, 0, 5, 8, 2, 8, 2, 0, 0]
	}
	prop_pillar_2 = ${prototype.prop_pillar_1} {
		animation = prop_pillar_2
	}
	prop_pillar_3 = ${stone_furniture} {
		animation = prop_pillar_3
		boundingBox = [12, 8]
		boundingBoxOffset = [6, 0]
		drawOffset = [24, 11]
	}
	prop_pillar_4 = ${prototype.prop_pillar_3} {
		animation = prop_pillar_4
	}
	prop_pillar_5 = ${stone_furniture} {
		animation = prop_pillar_5
		boundingBox = [24, 8]
		boundingBoxOffset = [12, 0]
		drawOffset = [24, 11]
	}
	prop_skeleton_1 = ${furniture} {
		animation = prop_skeleton_1
		boundingBox = [20, 6]
		drawOffset = [24, 11]
		shadow = circle
	}
	prop_skeleton_2 = ${furniture} {
		animation = prop_skeleton_2
		boundingBox = [20, 6]
		drawOffset = [24, 11]
		shadow = circle
	}
	prop_cell_1 = ${wall_decoration} {
		animation = prop_cell_1
		boundingBox = [30, 33]
	}
	prop_cell_2 = ${wall_decoration} {
		animation = prop_cell_2
		boundingBox = [30, 33]
	}
	prop_round_carpet = {
		animation = prop_round_carpet
		boundingBox = [47, 47]
		drawOffset = [24, 24]
		solid = false
		zIndex = -1
	}
	prop_dungeon_archway = ${stone_furniture} {
		animation = prop_dungeon_archway
		boundingBox = [14, 5]
		boundingBoxOffset = [7, 0]
		drawOffset = [48, 0]
		//occlusionSegments = [44, 0, 41, 1, 41, 1, 41, 3, 41, 3, 44, 5, 44, 5, 51, 5, 51, 5, 54, 3, 54, 3, 54, 1, 54, 1, 51, 0, 51, 0, 44, 0]
	}
	prop_dungeon_column = ${stone_furniture} {
		animation = prop_dungeon_column
		boundingBox = [62, 24]
		boundingBoxOffset = [31, 0]
		drawOffset = [48, 0]
		occlusionSegments = [-9, 0, -22, 4, -22, 4, -31, 10, -31, 10, -31, 13, -31, 13, -22, 19, -22, 19, -9, 23, -9, 23, 8, 23, 8, 23, 18, 19, 18, 19, 30, 13, 30, 13, 30, 10, 30, 10, 18, 4, 18, 4, 8, 0, 8, 0, -9, 0]
	}
	prop_dungeon_column_broken = ${prototype.prop_dungeon_column} {
		animation = prop_dungeon_column_broken
	}
	prop_dungeon_statue_angel = ${stone_furniture} {
		animation = prop_dungeon_statue_angel
		boundingBox = [56, 14]
		boundingBoxOffset = [28, 0]
		drawOffset = [48, 0]
		occlusionSegments = [-7, 0, -9, 2, -9, 2, -16, 2, -16, 2, -17, 4, -17, 4, -17, 7, -17, 7, -1, 12, -1, 12, 13, 10, 13, 10, 15, 8, 15, 8, 15, 6, 15, 6, 12, 3, 12, 3, 6, 2, 6, 2, 6, 0, 6, 0, -7, 0]
	}
	prop_dungeon_statue_demon = ${stone_furniture} {
		animation = prop_dungeon_statue_demon
		boundingBox = [50, 14]
		boundingBoxOffset = [25, 0]
		drawOffset = [48, 0]
		occlusionSegments = [
			-27, 0, -28, 2, -28, 2, -23, 5, -23, 5, -18, 3, -18, 3, -18, 1, -18, 1, -23, 0, -23, 0, -27, 0
			17, 1, 12, 3, 12, 3, 12, 5, 12, 5, 21, 5, 21, 5, 21, 1, 21, 1, 17, 1
		]
	}
	prop_dungeon_statue_hooded = ${stone_furniture} {
		animation = prop_dungeon_statue_hooded
		boundingBox = [42, 20]
		boundingBoxOffset = [24, 0]
		drawOffset = [48, 0]
		occlusionSegments = [-3, 0, -6, 3, -6, 3, -15, 2, -15, 2, -20, 4, -20, 4, -12, 10, -12, 10, 21, 7, 21, 7, 13, 4, 13, 4, 8, 0, 8, 0, -3, 0]
	}
}
