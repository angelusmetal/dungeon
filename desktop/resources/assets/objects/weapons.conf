weapons_animation {
	texture = "weapons.png"
	tilesize = 32
	frameDuration = 1
}

animation {
	weapon_iron_dagger = ${weapons_animation} {
		loop = [0]
	}
	weapon_iron_estoc = ${weapons_animation} {
		loop = [1]
	}
	weapon_iron_shortsword = ${weapons_animation} {
		loop = [2]
	}
	weapon_iron_longsword = ${weapons_animation} {
		loop = [3]
	}
	weapon_iron_sawblade = ${weapons_animation} {
		loop = [4]
	}
	weapon_iron_broadsword = ${weapons_animation} {
		loop = [5]
	}
	weapon_bronze_dagger = ${weapons_animation} {
		loop = [6]
	}
	weapon_bronze_estoc = ${weapons_animation} {
		loop = [7]
	}
	weapon_bronze_shortsword = ${weapons_animation} {
		loop = [8]
	}
	weapon_bronze_longsword = ${weapons_animation} {
		loop = [9]
	}
	weapon_bronze_sawblade = ${weapons_animation} {
		loop = [10]
	}
	weapon_bronze_broadsword = ${weapons_animation} {
		loop = [11]
	}
	weapon_steel_dagger = ${weapons_animation} {
		loop = [12]
	}
	weapon_steel_estoc = ${weapons_animation} {
		loop = [13]
	}
	weapon_steel_shortsword = ${weapons_animation} {
		loop = [14]
	}
	weapon_steel_longsword = ${weapons_animation} {
		loop = [15]
	}
	weapon_steel_sawblade = ${weapons_animation} {
		loop = [16]
	}
	weapon_steel_broadsword = ${weapons_animation} {
		loop = [17]
	}
	weapon_fire_wand = ${weapons_animation} {
		loop = [18]
	}
	weapon_fire_staff = ${weapons_animation} {
		loop = [19]
	}
	weapon_fire_scepter = ${weapons_animation} {
		loop = [20]
	}
	weapon_poison_wand = ${weapons_animation} {
		loop = [21]
	}
	weapon_poison_staff = ${weapons_animation} {
		loop = [22]
	}
	weapon_poison_scepter = ${weapons_animation} {
		loop = [23]
	}

	# Melee slash
	melee_slash {
		texture = "slash.png"
		tilesize = 64
		frameDuration = 0.02
		sequence = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13]
	}

	# TODO Remove these as they are deprecated
	# Projectiles
	projectile_assassin_fly {
		texture = "projectile.png"
		tilesize = 16
		frameDuration = 0.1
		loop = [0]
	}
	projectile_assassin_explode = ${animation.projectile_assassin_fly} {
		loop = [1, 2, 3, 4, 5]
	}
	projectile_thief_fly = ${animation.projectile_assassin_fly} {
		loop = [6]
	}
	projectile_thief_explode = ${animation.projectile_assassin_fly} {
		loop = [7, 8, 9, 10, 11]
	}
	projectile_witch_fly = ${animation.projectile_assassin_fly} {
		loop = [12]
	}
	projectile_witch_explode = ${animation.projectile_assassin_fly} {
		loop = [13, 14, 15, 16, 17]
	}

}

weapon_base {
	boundingBox = [32, 32]
	drawOffset = [16, 16]
	light = {diameter:200, color:0088b8, texture:light.png, traits:[torchlight, rotateSlow]}
	flare = {diameter:60, color:19c8b940, texture:light_rays.png, traits:[torchlight, rotateFast]}
	zOscillate = [0.5, 8.0]
}

prototype {

	weapon_devastator_staff = ${weapon_base} {
		factory = com.dungeon.game.object.weapon.WeaponFactory.devastatorStaff
		animation = weapon_fire_scepter
		color = ff0000ff
	}

	random_weapon = ${weapon_base} {
		factory = com.dungeon.game.object.weapon.WeaponFactory.greenStaff
		animation = weapon_steel_longsword
	}
}

# Cat Bullet
animation {
	cat_bullet {
		texture = "cat_bullet.png"
		tilesize = 16
		frameDuration = 0.08
		loop = [0, 1, 2, 3, 4]
	}
	cat_bullet_trail {
		texture = "cat_bullet.png"
		tilesize = 16
		frameDuration = 0.16
		sequence = [5, 6, 7, 8, 9, 10]
	}
}

prototype {
	cat_bullet {
		animation = cat_bullet
		boundingBox = [10, 10]
		drawOffset = [11, 8]
		light = {diameter:300, color:8833ccbb, texture:light.png, castsShadow:true}
		flare = {diameter:90, color:8833ccbb, texture:light_flare.png, traits:[torchlight]}
		speed = 200
		timeToLive = 10
		hits = nonPlayers
		with = [
			{do:generate, prototype = cat_bullet_trail, frequency = 0.033, impulseX = [-30, 30], impulseY = [-30, 30], rotation:movement}
		]
		onExpire = [
			{do:generate, prototype = cat_bullet_impact}
			{do:generate, prototype = cat_bullet_particle, count = 20, impulseX = [-30, 30], impulseY = [-30, 30], rotation:movement}
		]
		z = 8
		#movOscillate = [2, 5]
	}

	cat_bullet_particle {
		animation = invisible //cat_bullet_trail
		flare = {diameter:5, color:8833ccff, texture:light_flare.png}
		boundingBox = [10, 10]
		drawOffset = [14, 8]
		timeToLive = 1
		fadeOut = 0.7
		zSpeed = 0
		speed = 10
		fadeOutFlare = true
		z = 8
	}

	cat_bullet_trail = ${prototype.cat_bullet_particle} {
//		light = {diameter:60, color:8833cc88, texture:light_flare.png}
//		fadeOutLight = true
	}

	cat_bullet_impact = {
		animation = invisible
		light = {diameter:300, color:8833cc88, texture:light.png, castsShadow:true}
		timeToLive = 1
		fadeOutLight = true
		speed = 100
	}

}

# Venom Bullet
animation {
	venom_bullet {
		texture = "venom_bullet.png"
		tilesize = 16
		frameDuration = 0.08
		loop = [0, 1, 2, 3, 4]
	}
	venom_bullet_trail {
		texture = "venom_bullet.png"
		tilesize = 16
		frameDuration = 0.08
		sequence = [5, 6, 7, 8, 9, 10]
	}
}

prototype {
	venom_bullet {
		animation = venom_bullet
		boundingBox = [10, 10]
		drawOffset = [11, 8]
		light = {diameter:300, color:4be13288, texture:light.png, castsShadow:true}
		flare = {diameter:90, color:4be13240, texture:light_flare.png, traits:[torchlight]}
		speed = 200
		timeToLive = 3
		bounciness = 1
		hits = nonPlayers
		with = [
			{do:generate, prototype = venom_bullet_trail, frequency = 0.052, impulseX = [-30, 30], impulseY = [-30, 30], rotation:movement}
		]
		onExpire = [
			{do:generate, prototype = venom_bullet_impact}
			{do:generate, prototype = venom_bullet_particle, count = 20, impulseX = [-30, 30], impulseY = [-30, 30], rotation:movement}
		]
		z = 8
		movOscillate = [2, 15]
	}

	venom_bullet_inverse = ${prototype.venom_bullet} {
		movOscillate = [2, -15]
	}

	venom_bullet_particle {
		animation = venom_bullet_trail
		boundingBox = [10, 10]
		drawOffset = [14, 8]
		timeToLive = 1
		fadeOut = 0.3
		zSpeed = 0
		z = 8
	}

	venom_bullet_trail = ${prototype.venom_bullet_particle} {
//		light = {diameter:20, color:4be13288, texture:light.png}
//		fadeOutLight = true
	}

	venom_bullet_impact = {
		animation = invisible
		light = {diameter:160, color:4be13288, texture:light.png, castsShadow:true}
		timeToLive = 1
		fadeOutLight = true
	}

}

# Firebolt
animation {
	firebolt {
		texture = "fireball.png"
		tilesize = 16
		frameDuration = 0.04
		loop = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
	}
	firebolt_trail {
		texture = "fireball.png"
		tilesize = 16
		frameDuration = 0.04
		sequence = [10, 11, 12, 13, 14, 15, 16, 17, 18]
	}
}

prototype {
	firebolt {
		animation = firebolt
		boundingBox = [10, 10]
		drawOffset = [11, 8]
		light = {diameter:300, color:804400, texture:light.png, castsShadow:true}
		flare = {diameter:90, color:804400, texture:light_flare.png, traits:[torchlight]}
		speed = 200
		timeToLive = 3
		hits = nonPlayers
		with = [
			{do:generate, prototype = firebolt_trail, frequency = 0.052, impulseX = [-30, 30], impulseY = [-30, 30], rotation:movement}
			{do:generate, prototype = smoke_small, frequency = 0.052, impulseX = [-10, 10], impulseY = [-10, 10], impulseZ = [10, 30]}
			// TODO Use this for an arrow type projectile
//			{do:generate, prototype = firebolt_trail, frequency = 0.052, impulseAngle: [90, 100], rotation:movement}
//			{do:generate, prototype = firebolt_trail, frequency = 0.052, impulseAngle: [-90, 100], rotation:movement}
		]
		onExpire = [
			{do:generate, prototype = firebolt_impact}
			{do:generate, prototype = firebolt_particle, count = 20, impulseX = [-30, 30], impulseY = [-30, 30], rotation:movement}
		]
		z = 8
		//movOscillate = [2, 15]
	}

	firebolt_particle {
		animation = firebolt_trail
		boundingBox = [10, 10]
		drawOffset = [14, 8]
		timeToLive = 0.72
		fadeOut = 0.9
		zSpeed = 0
		z = 8
	}

	firebolt_trail = ${prototype.firebolt_particle} {
//		light = {diameter:60, color:804400, texture:light.png}
//		fadeOutLight = true
	}

	firebolt_impact = {
		animation = invisible
		light = {diameter:160, color:804400, texture:light.png, castsShadow:true}
		timeToLive = 1
		fadeOutLight = true
	}

}

prototype {
	devastator_bullet {
		animation = cat_bullet
		color = ff0000ff
		boundingBox = [10, 10]
		drawOffset = [11, 8]
		light = {diameter:300, color:ff0000ff, texture:light.png, castsShadow:true}
		flare = {diameter:90, color:ff0000ff, texture:light_flare.png, traits:[torchlight]}
		speed = 200
		timeToLive = 10
		hits = nonPlayers
		with = [
			{do:generate, prototype = devastator_bullet_trail, frequency = 0.033, impulseX = [-30, 30], impulseY = [-30, 30], rotation:movement}
		]
		onExpire = [
			{do:generate, prototype = devastator_bullet_impact}
			{do:generate, prototype = devastator_bullet_particle, count = 20, impulseX = [-30, 30], impulseY = [-30, 30], rotation:movement}
		]
		z = 8
		#movOscillate = [2, 5]
	}

	devastator_bullet_particle {
		animation = cat_bullet_trail
		boundingBox = [10, 10]
		drawOffset = [14, 8]
		timeToLive = 1
		fadeOut = 0.7
		zSpeed = 0
		z = 8
	}

	devastator_bullet_trail = ${prototype.devastator_bullet_particle} {
		//		light = {diameter:60, color:8833cc88, texture:light_flare.png}
		//		fadeOutLight = true
	}

	devastator_bullet_impact = {
		animation = invisible
		light = {diameter:160, color:ff0000ff, texture:light.png, castsShadow:true}
		timeToLive = 1
		fadeOutLight = true
	}

}

# Slime fireball

prototype {
	slime_fireball = ${prototype.firebolt} {
		hits = players
		timeToLive = 10
		speed = 100
	}
}
